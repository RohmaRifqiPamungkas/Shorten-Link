import{u as E,r as l,j as e,H as L}from"./app-CL3xyi0u.js";import{d as g}from"./index-DQ1NuDG1.js";import{I as m}from"./iconify-CJWKapRj.js";import{D as U}from"./DashboardLayout-BfzmEYb1.js";import{P as $}from"./PrimaryButton-MSExsVs6.js";import{B as P}from"./Breadcrumb-BOL8ZAyR.js";import{D as O}from"./DeleteModal-DXTT1HM6.js";import{S as k}from"./ShareModal-DHw3Ylx_.js";import{N as I}from"./Notification-DEuHDJOw.js";/* empty css            */import"./index-DtrrT7rv.js";const J=({auth:f,link:r})=>{const{data:a,setData:o,patch:b,processing:u,errors:s}=E({original_url:r.original_url,custom_alias:r.custom_alias||"",expires_at:r.expires_at?r.expires_at.substring(0,10):"",current_password:"",new_password:""}),[p,i]=l.useState(!1),[x,w]=l.useState(null),[j,h]=l.useState(!1),[N,y]=l.useState(""),[n,d]=l.useState(null),v=t=>{const c=`${window.location.origin}/s/${t.custom_alias}`;navigator.clipboard.writeText(c).then(()=>{d({type:"success",message:"Link copied to clipboard!"})}).catch(()=>{d({type:"error",message:"Failed to copy the link."})})},_=t=>{const c=`${window.location.origin}/s/${t.custom_alias}`;y(c),h(!0)},S=t=>{w(t),i(!0)},C=()=>{x&&g.Inertia.post(`/shorten/${x.id}`,{_method:"DELETE"},{onSuccess:()=>{g.Inertia.visit("/shorten",{replace:!0,preserveScroll:!0})}}),i(!1)},D=t=>{t.preventDefault(),b(`/shorten/${r.id}`)};return e.jsxs(U,{user:f.user,children:[e.jsx(P,{}),e.jsx(L,{title:"   Edit Link"}),e.jsx("h2",{className:"text-xl font-semibold text-blue-900 mt-4 mb-4",children:"Edit URL"}),e.jsxs("div",{className:"mb-4 flex flex-col md:flex-row md:items-center gap-4 md:justify-between text-sm text-foreground",children:[e.jsxs("span",{className:"text-foreground text-sm md:text-lg font-medium",children:["Your Link Is :"," ",e.jsx("a",{className:"underline",href:`/s/${a.custom_alias}`,target:"_blank",rel:"noopener noreferrer",children:`${window.location.origin}/m/${a.custom_alias}`})]}),e.jsxs("div",{className:"flex gap-2 md:ml-4",children:[e.jsx("button",{type:"button",title:"Copy",onClick:()=>v(r),className:"group bg-white p-3 rounded-lg shadow hover:bg-primary-100",children:e.jsx(m,{icon:"akar-icons:copy",width:20,height:20,className:"text-foreground group-hover:text-white"})}),e.jsx("button",{type:"button",title:"Delete",onClick:()=>S(r),className:"group bg-white p-3 rounded-lg shadow hover:bg-primary-100",children:e.jsx(m,{icon:"gravity-ui:trash-bin",width:20,height:20,className:"text-foreground group-hover:text-white"})}),e.jsx("button",{type:"button",title:"Share",onClick:()=>_(r),className:"group bg-white p-3 rounded-lg shadow hover:bg-primary-100",children:e.jsx(m,{icon:"tabler:share",width:20,height:20,className:"text-foreground group-hover:text-white"})})]})]}),n&&e.jsx(I,{type:n.type,message:n.message,onClose:()=>d(null)}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-2xl md:max-w-full p-10 relative",children:[e.jsxs("form",{onSubmit:D,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-foreground",children:"Long URL"}),e.jsx("input",{type:"url",className:"w-full border border-brfourth rounded-lg px-3 py-2 mt-1",placeholder:"https://example.com/",value:a.original_url,onChange:t=>o("original_url",t.target.value),required:!0}),s.original_url&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:s.original_url})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 md:gap-0",children:[e.jsxs("div",{className:"basis-3/4 md:me-4",children:[e.jsx("label",{className:"text-sm text-foreground",children:"Short URL"}),e.jsx("input",{type:"text",className:"w-full border border-brfourth rounded-lg px-3 py-2 mt-1 bg-white text-gray-700",value:`${window.location.origin}/m/`,readOnly:!0})]}),e.jsxs("div",{className:"basis-3/4 ",children:[e.jsx("label",{className:"text-sm text-foreground",children:"Alias"}),e.jsx("input",{type:"text",className:"w-full border border-brfourth rounded-lg px-3 py-2 mt-1",placeholder:"custom-alias",value:a.custom_alias,onChange:t=>o("custom_alias",t.target.value)}),s.custom_alias&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:s.custom_alias})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-foreground",children:"Expiration Date"}),e.jsx("input",{type:"date",className:"w-full border border-brfourth rounded-lg px-3 py-2 mt-1",value:a.expires_at,onChange:t=>o("expires_at",t.target.value)}),s.expires_at&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:s.expires_at})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h3",{className:"text-md font-semibold text-primary-100 mb-2",children:"Password Protection"}),r.password&&e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"text-sm text-foreground",children:"Current Password"}),e.jsx("input",{type:"password",className:"w-full border border-brfourth rounded-lg px-3 py-2 mt-1",placeholder:"Enter current password",onChange:t=>o("current_password",t.target.value)}),s.current_password&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:s.current_password})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-foreground",children:"New Password"}),e.jsx("input",{type:"password",className:"w-full border border-brfourth rounded-lg px-3 py-2 mt-1",placeholder:"Enter new password (leave empty to remove)",onChange:t=>o("new_password",t.target.value)}),s.new_password&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:s.new_password})]})]}),e.jsx($,{type:"submit",disabled:u,children:u?"Updating...":"Update"})]}),p&&e.jsx(O,{isOpen:p,onClose:()=>i(!1),onConfirm:C}),j&&e.jsx(k,{url:N,onClose:()=>h(!1)})]})]})};export{J as default};
