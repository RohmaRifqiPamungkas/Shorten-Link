import{r as a,u as F,j as e,b as R,H,L as z}from"./app-CL3xyi0u.js";import{D as q}from"./DashboardLayout-BfzmEYb1.js";import{d as x}from"./index-DQ1NuDG1.js";import{S as G,a as J,B as K,P as Q}from"./ButtonShort-CDpl3A1X.js";import{P as V}from"./PrimaryButton-MSExsVs6.js";import{N as _}from"./Notification-DEuHDJOw.js";import{D as W}from"./DeleteModal-DXTT1HM6.js";import{S as X}from"./ShareModal-DHw3Ylx_.js";import{I as b}from"./iconify-CJWKapRj.js";import{b as Y}from"./index-DtrrT7rv.js";/* empty css            */function Z({show:N,onClose:s}){const[m,c]=a.useState(null),[g,i]=a.useState(!1),{data:u,setData:o,post:h,processing:y,errors:n,reset:j,clearErrors:d}=F({project_name:"",project_slug:"",password:""});if(!N)return null;const w=()=>{j(),d(),c(null),s()},f=r=>{r.preventDefault(),c(null),g||o("password",""),h("/projects",{onSuccess:()=>{c({type:"success",message:"Created Successfully."}),j(),i(!1),d()},onError:()=>{c({type:"error",message:"An error occurred, please check your input."})}})};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-5",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-sm md:max-w-2xl p-5 md:p-10 relative",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{className:"flex flex-row",children:[e.jsx("img",{src:"/images/Hyperlink.png",style:{width:"24px",height:"24px"},alt:"hyperlink"}),e.jsx("h2",{className:"text-sm md:text-xl ms-4 font-semibold text-primary-100 mb-4",children:"Management Link"})]}),e.jsx("button",{onClick:w,className:"text-foreground font-black hover:text-primary-100 w-2 h-2 md:w-4 md:h-4",children:"âœ•"})]}),m&&e.jsx(_,{type:m.type,message:m.message,onClose:()=>c(null)}),e.jsx("div",{className:"mt-4",children:e.jsxs("form",{onSubmit:f,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-foreground",children:"Name Project"}),e.jsx("input",{type:"text",className:"w-full border border-brfourth rounded-lg px-3 py-2 mt-1",placeholder:"example",name:"project_name",value:u.project_name,onChange:r=>o("project_name",r.target.value),required:!0}),n.project_name&&e.jsx("div",{className:"text-red-500 text-sm mt-1",children:n.project_name})]}),e.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:gap-0",children:[e.jsxs("div",{className:"w-full md:basis-3/4 md:me-4",children:[e.jsx("label",{className:"text-sm text-foreground",children:"URL"}),e.jsx("input",{type:"text",className:"w-full border border-brfourth rounded-lg px-2.5 py-2 mt-1 bg-white text-foreground",value:`${window.location.host}/m/`,readOnly:!0})]}),e.jsxs("div",{className:"w-full md:basis-3/4",children:[e.jsx("label",{className:"text-sm text-foreground",children:"Alias"}),e.jsx("input",{type:"text",className:"w-full border border-brfourth rounded-lg px-3 py-2 mt-1 bg-white text-foreground",placeholder:"custom-alias",id:"project_slug",name:"project_slug",value:u.project_slug,onChange:r=>o("project_slug",r.target.value)}),n.project_slug&&e.jsx("div",{className:"text-red-500 text-sm mt-1",children:n.project_slug})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm text-foreground",children:[e.jsx("input",{type:"checkbox",checked:g,onChange:r=>i(r.target.checked)}),"Protect with Password?"]}),g&&e.jsx("input",{type:"password",className:"w-full border border-brfourth rounded-lg px-3 py-2 mt-2",placeholder:"Enter password",name:"password",value:u.password,onChange:r=>o("password",r.target.value)}),n.password&&e.jsx("div",{className:"text-red-500 text-sm mt-1",children:n.password})]}),e.jsx(V,{type:"submit",disabled:y,children:y?"Add Project...":"Add Project"})]})})]})})}function pe({auth:N}){const{projects:s={data:[],links:[]},success:m}=R().props,[c,g]=a.useState(""),[i,u]=a.useState(!1),[o,h]=a.useState([]),[y,n]=a.useState(!1),[j,d]=a.useState(!1),[w,f]=a.useState(null),[r,k]=a.useState(!1),[P,C]=a.useState(""),[v,p]=a.useState(null),[S,D]=a.useState(Number(new URLSearchParams(window.location.search).get("perPage"))||10);a.useEffect(()=>{m&&(p({type:"success",message:m}),x.Inertia.replace(window.location.pathname+window.location.search))},[m]);const E=t=>{h(l=>l.includes(t)?l.filter(T=>T!==t):[...l,t])},L=t=>{const l=`${window.location.host}/m/${t.project_slug}`;navigator.clipboard.writeText(l).then(()=>{p({type:"success",message:"Link copied to clipboard!"})}).catch(()=>{p({type:"error",message:"Failed to copy the link."})})},M=t=>{const l=`${window.location.host}/m/${t.project_slug}`;C(l),k(!0)},$=t=>{f(t),d(!0)},I=()=>{w?x.Inertia.delete(`/projects/${w.id}`,{onSuccess:()=>{d(!1),f(null)},onError:()=>{p({type:"error",message:"Failed to delete project. Please try again."}),d(!1),f(null)},preserveScroll:!0}):d(!1)},A=()=>{if(o.length===0){p({type:"error",message:"No projects selected."});return}window.confirm("Are you sure you want to delete selected projects?")&&x.Inertia.post("/projects/bulk-delete",{ids:o,_method:"DELETE"},{onSuccess:()=>{p({type:"success",message:"Selected Deleted Successfully."}),h([]),u(!1)},onError:()=>{p({type:"error",message:"Failed to delete selected projects."})},preserveScroll:!0})},U=t=>{x.Inertia.get("/projects",{page:t,perPage:S,search:c},{preserveState:!0,replace:!0})},B=t=>{D(t),x.Inertia.get("/projects",{page:1,perPage:t,search:c},{preserveState:!0,replace:!0})},O=t=>{g(t),x.Inertia.get("/projects",{page:1,perPage:S,search:t},{preserveState:!0,replace:!0})};return e.jsxs(q,{user:N.user,children:[e.jsx(H,{title:"Management Link"}),e.jsxs("div",{className:"py-5",children:[e.jsx("h1",{className:"text-xl md:text-2xl font-semibold text-primary-100",children:"Management Link"}),e.jsxs("div",{className:"flex justify-between items-center flex-wrap gap-5 my-3",children:[e.jsx("p",{className:"text-gray-700 text-lg font-medium",children:"List Management Link"}),e.jsxs("div",{className:"flex items-center gap-3 transition-all duration-300 ease-in-out flex-wrap",children:[e.jsx("div",{className:"transition-all duration-300",children:e.jsx(G,{onClick:()=>n(!0),label:"Add Project",icon:e.jsx(Y,{size:18})})}),e.jsx("div",{className:"transition-all duration-300",children:e.jsx(J,{onSearch:O})}),e.jsx("div",{className:"transition-all duration-300",children:e.jsx(K,{isActive:i,toggleBulkMode:()=>{u(!i),h([])},onDelete:A})})]})]}),v&&e.jsx(_,{type:v.type,message:v.message,onClose:()=>p(null)}),e.jsx("div",{className:"overflow-x-auto bg-white shadow rounded-2xl",children:e.jsxs("table",{className:"min-w-full text-left border-collapse text-sm  md:text-[16px]",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-muted",children:[i&&e.jsx("th",{className:"px-4 py-6",children:e.jsx("input",{type:"checkbox",checked:o.length===s.data.length&&s.data.length>0,onChange:t=>{t.target.checked?h(s.data.map(l=>l.id)):h([])}})}),e.jsx("th",{className:"px-4 py-6 font-semibold",children:"Project Name"}),e.jsx("th",{className:"px-4 py-6 font-semibold",children:"URL"}),e.jsx("th",{className:"px-4 py-6 font-semibold",children:"Date Created"}),e.jsx("th",{className:"px-4 py-6 font-semibold",children:"Action"})]})}),e.jsx("tbody",{children:s.data.length>0?s.data.map(t=>e.jsxs("tr",{className:"border-b border-muted hover:bg-gray-50",children:[i&&e.jsx("td",{className:"px-4 py-4",children:e.jsx("input",{type:"checkbox",checked:o.includes(t.id),onChange:()=>E(t.id)})}),e.jsxs("td",{className:"px-4 py-4 whitespace-nowrap hover:underline flex items-center gap-2",children:[e.jsx("span",{className:"inline-flex items-center justify-center w-8 h-8 rounded-full bg-primary-100 text-white font-bold text-lg",style:{flexShrink:0},children:t.project_name.charAt(0).toUpperCase()}),e.jsx("a",{href:`/projects/${t.id}/categories`,className:"hover:underline text-foreground",children:t.project_name})]}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("a",{href:`${window.location.origin}/m/${t.project_slug}`,target:"_blank",rel:"noopener noreferrer",className:"text-foreground hover:underline",children:`${window.location.origin}/m/${t.project_slug}`})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:t.created_at.slice(0,10)}),e.jsxs("td",{className:"px-4 py-4 space-x-4 text-lg text-gray-700 flex",onClick:l=>l.stopPropagation(),children:[e.jsx("button",{title:"Copy",onClick:()=>L(t),className:"hover:text-primary-100",children:e.jsx(b,{icon:"akar-icons:copy",width:20,height:20})}),e.jsx(z,{href:`/projects/${t.id}/edit`,title:"Edit",className:"hover:text-primary-100",children:e.jsx(b,{icon:"iconamoon:edit-light",width:20,height:20})}),e.jsx("button",{onClick:()=>$(t),title:"Delete",className:"hover:text-primary-100",children:e.jsx(b,{icon:"gravity-ui:trash-bin",width:20,height:20})}),e.jsx("button",{title:"Share",onClick:()=>M(t),className:"hover:text-primary-100",children:e.jsx(b,{icon:"tabler:share",width:20,height:20})})]})]},t.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:i?4:3,className:"px-4 py-6 text-center text-gray-500",children:"No projects available yet."})})})]})}),e.jsx(Q,{pagination:{current_page:s.current_page,last_page:s.last_page,from:s.from,to:s.to,total:s.total,prev_page_url:s.prev_page_url,next_page_url:s.next_page_url},perPage:S,onPageChange:U,onPerPageChange:B}),j&&e.jsx(W,{isOpen:j,onClose:()=>d(!1),onConfirm:I}),r&&e.jsx(X,{url:P,onClose:()=>k(!1)}),e.jsx(Z,{show:y,onClose:()=>n(!1),onSuccess:()=>x.Inertia.reload()})]})]})}export{pe as default};
