import{j as e,r as l,u as D,b as F,H as L,L as z}from"./app-BFg2P5Wj.js";import{T as O,D as $}from"./DashboardLayout-4fJ9hrIz.js";import{d as y}from"./index-B-NIXFdN.js";import{S as H,B as R,P as V}from"./BulkAction-D7P3iHnE.js";import{N as C}from"./Notification-BwZVfdfk.js";import{I as S}from"./iconify-DMzbdefQ.js";import{b as W}from"./index-DMJx3FTh.js";import{P as q}from"./PrimaryButton-TVen-bbm.js";import{D as U}from"./DeleteModal-BAt4GIh7.js";/* empty css            */function G({onClick:s,icon:n=e.jsx(W,{size:18}),label:o="Add Domain",className:r="",type:p="button"}){return e.jsxs("button",{onClick:s,type:p,className:`bg-secondary hover:bg-primary-100 text-white px-3 py-2 flex items-center gap-1 rounded-lg ${r}`,children:[n," ",o]})}function J({show:s,onClose:n}){const[o,r]=l.useState(null),{data:p,setData:d,post:g,processing:m,errors:i,reset:x,clearErrors:a}=D({domains:""});if(!s)return null;const u=()=>{x(),a(),r(null),n()},j=h=>{h.preventDefault(),r(null),g(route("domains.store"),{onSuccess:()=>{r({type:"success",message:"Domain added successfully, please verify DNS."}),x(),a(),n()},onError:()=>{r({type:"error",message:"Failed to add domain. Check input."})}})};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-5",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-sm md:max-w-2xl p-5 md:p-10 relative",children:[e.jsxs("div",{className:"flex justify-between items-center border-b border-gray-200 pb-3",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(O,{className:"text-primary-100 w-6 h-6"}),e.jsx("h2",{className:"ml-3 text-base md:text-lg font-semibold text-primary-100",children:"Add Custom Domain"})]}),e.jsx("button",{onClick:u,className:"text-gray-500 hover:text-primary-100 text-lg font-bold",children:"âœ•"})]}),o&&e.jsx(C,{type:o.type,message:o.message,onClose:()=>r(null)}),e.jsx("div",{className:"mt-4",children:e.jsxs("form",{onSubmit:j,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-foreground",children:"Domain"}),e.jsx("input",{type:"text",className:"w-full border border-brfourth rounded-lg px-3 py-2 mt-1 bg-white text-gray-700",placeholder:"https://yourdomain.com",name:"domain",value:p.domain,onChange:h=>d("domain",h.target.value),required:!0}),i.domain&&e.jsx("div",{className:"text-red-500 text-sm mt-1",children:i.domain})]}),e.jsx(q,{type:"submit",disabled:m,children:m?"Created Domain...":"Save Domain"})]})})]})})}function de({domains:s}){const{success:n,error:o}=F().props,[r,p]=l.useState(""),[d,g]=l.useState(!1),[m,i]=l.useState([]),[x,a]=l.useState(null),[u,j]=l.useState(Number(new URLSearchParams(window.location.search).get("perPage"))||10),[h,b]=l.useState(!1),[N,w]=l.useState(null),[k,v]=l.useState(!1),{data:K,setData:Q,post:X,processing:P,reset:Y,errors:Z}=D({domain:""});l.useEffect(()=>{n&&a({type:"success",message:n}),o&&a({type:"error",message:o})},[n,o]);const _=t=>{i(c=>c.includes(t)?c.filter(f=>f!==t):[...c,t])},E=()=>{if(m.length===0){a({type:"error",message:"No domains selected."});return}window.confirm("Are you sure you want to delete selected domains?")&&y.Inertia.post("/domains/bulk-delete",{ids:m,_method:"DELETE"},{onSuccess:()=>{a({type:"success",message:"Selected domains deleted successfully."}),i([]),g(!1)},onError:()=>{a({type:"error",message:"Failed to delete selected domains."})},preserveScroll:!0})},A=t=>{y.Inertia.get("/domains",{page:t,perPage:u,search:r},{preserveState:!0,replace:!0})},M=t=>{j(t),y.Inertia.get("/domains",{page:1,perPage:t,search:r},{preserveState:!0,replace:!0})},I=t=>{p(t),y.Inertia.get("/domains",{page:1,perPage:u,search:t},{preserveState:!0,replace:!0})},B=t=>{w(t),b(!0)},T=()=>{N&&destroy(route("domains.destroy",N.id),{preserveScroll:!0,onSuccess:()=>{b(!1),w(null),a({type:"success",message:"Domain deleted successfully."})},onError:()=>{a({type:"error",message:"Failed to delete domain."})}})};return e.jsxs($,{children:[e.jsx(L,{title:"Custom Domains"}),e.jsxs("div",{className:"py-5",children:[e.jsx("h1",{className:"text-xl md:text-2xl font-semibold text-primary-100",children:"Custom Domains"}),e.jsxs("div",{className:"flex justify-between items-center flex-wrap gap-5 my-3",children:[e.jsx("p",{className:"text-gray-700 text-lg font-medium",children:"Manage your branded domains"}),e.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[e.jsx(G,{onClick:()=>v(!0)}),e.jsx("div",{className:"transition-all duration-300",children:e.jsx(H,{onSearch:I})}),e.jsx("div",{className:"transition-all duration-300",children:e.jsx(R,{isActive:d,toggleBulkMode:()=>{g(!d),i([])},onDelete:E})})]})]}),x&&e.jsx(C,{type:x.type,message:x.message,onClose:()=>a(null)}),e.jsx(J,{show:k,onClose:()=>v(!1)}),e.jsx("div",{className:"overflow-x-auto bg-white shadow rounded-2xl",children:e.jsxs("table",{className:"min-w-full text-left border-collapse text-sm md:text-[16px]",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-muted hover:bg-gray-50",children:[d&&e.jsx("th",{className:"px-4 py-6",children:e.jsx("input",{type:"checkbox",checked:m.length===s.data.length&&s.data.length>0,onChange:t=>{t.target.checked?i(s.data.map(c=>c.id)):i([])}})}),e.jsx("th",{className:"px-4 py-6 font-semibold",children:"Domain"}),e.jsx("th",{className:"px-4 py-6 font-semibold",children:"Date Created"}),e.jsx("th",{className:"px-4 py-6 font-semibold",children:"Verified At"}),e.jsx("th",{className:"px-4 py-6 font-semibold",children:"Status"}),e.jsx("th",{className:"px-4 py-6 font-semibold",children:"Action"})]})}),e.jsx("tbody",{children:s.data.length>0?s.data.map(t=>{var c;return e.jsxs("tr",{className:"border-b border-muted hover:bg-gray-50",children:[d&&e.jsx("td",{className:"px-4 py-4",children:e.jsx("input",{type:"checkbox",checked:m.includes(t.id),onChange:()=>_(t.id)})}),e.jsxs("td",{className:"px-4 py-4 whitespace-nowrap flex items-center gap-2 w-full max-w-full md:max-w-[560px] overflow-hidden",children:[e.jsx("img",{src:`https://www.google.com/s2/favicons?sz=64&domain=${t.domain}`,alt:"favicon",className:"w-8 h-8 rounded-full bg-gray-100 object-contain",style:{flexShrink:0},onError:f=>{f.currentTarget.onerror=null,f.currentTarget.src="https://cdn-icons-png.flaticon.com/512/565/565547.png"}}),e.jsx("div",{className:"min-w-0",children:e.jsx("span",{className:"text-sm text-foreground font-medium block overflow-hidden text-ellipsis whitespace-nowrap",children:t.domain})})]}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:(c=t.created_at)==null?void 0:c.slice(0,10)}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:t.verified_at?t.verified_at.slice(0,10):"-"}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${t.status==="Active"?"bg-green-100 text-green-800":t.status==="failed"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:t.status})}),e.jsxs("td",{className:"px-4 py-4 flex space-x-2 text-lg text-gray-700",children:[t.status==="Pending"&&e.jsx(z,{href:route("domains.verify",t.id),method:"post",as:"button",title:"Verify",className:"hover:text-primary-100",children:e.jsx(S,{icon:"mdi:check-circle-outline",width:20,height:20})}),e.jsx("button",{onClick:()=>B(t),title:"Delete",className:"hover:text-primary-100",children:e.jsx(S,{icon:"gravity-ui:trash-bin",width:20,height:20})})]})]},t.id)}):e.jsx("tr",{children:e.jsx("td",{colSpan:d?6:5,className:"px-4 py-6 text-center text-gray-500",children:"No domains available yet."})})})]})}),e.jsx(V,{pagination:{current_page:s.current_page,last_page:s.last_page,from:s.from,to:s.to,total:s.total,prev_page_url:s.prev_page_url,next_page_url:s.next_page_url},perPage:u,onPageChange:A,onPerPageChange:M}),e.jsx(U,{isOpen:h,onClose:()=>b(!1),onConfirm:T,processing:P})]})]})}export{de as default};
