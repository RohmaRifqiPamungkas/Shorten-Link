import{v as U,r as i,j as e,$ as P}from"./app-BO4aS4VV.js";import{I as n}from"./iconify-4cTnymJz.js";import{D as M,N as O,a as T}from"./Notification-CE1hsZqh.js";import{P as F}from"./PrimaryButton-DFDVG6GL.js";import{B as R}from"./Breadcrumb-D9twYQCJ.js";import{S as B}from"./ShareModal-BixkgqME.js";/* empty css            */import"./index-C158x22U.js";const V=({project:l,link:d,categories:I})=>{const{data:r,setData:m,patch:j,processing:p,errors:x}=U({category_id:d.category_id??"",links:[{title:d.title??"",url:d.original_url??""}]}),g=(t,s,o)=>{const c=[...r.links];c[t][s]=o,m("links",c)},w=()=>{m("links",[...r.links,{title:"",url:""}])},v=t=>{const s=r.links.filter((o,c)=>c!==t);m("links",s)},k=t=>{t.preventDefault(),j(`/projects/${l.id}/links/${d.id}`)},[f,u]=i.useState(!1),[b,N]=i.useState(null),[C,y]=i.useState(!1),[S,L]=i.useState(""),[h,a]=i.useState(null),D=t=>{const s=`${window.location.origin}/m/${t.project_slug}`;navigator.clipboard.writeText(s).then(()=>{a({type:"success",message:"Link copied to clipboard!"})}).catch(()=>{a({type:"error",message:"Failed to copy the link."})})},_=t=>{const s=`${window.location.origin}/m/${t.project_slug}`;L(s),y(!0)},$=t=>{N(t),u(!0)},E=()=>{b&&Inertia.post(`/dashboard/projects/${b.id}`,{_method:"DELETE"},{onSuccess:()=>{a({type:"success",message:"Project deleted successfully."})},onError:()=>{a({type:"error",message:"Failed to delete project. Please try again."})}}),u(!1)};return e.jsxs(M,{children:[e.jsx(P,{title:"Edit Link"}),e.jsx(R,{}),e.jsx("h2",{className:"text-xl font-semibold text-blue-900 mt-4 mb-4",children:"Edit URL"}),e.jsxs("div",{className:"mb-4 flex flex-col md:flex-row md:items-center gap-4 md:justify-between text-sm text-foreground",children:[e.jsxs("span",{className:"text-foreground text-sm md:text-lg font-medium",children:["List link in :"," ",e.jsx("a",{className:"underline",href:`/m/${l.project_slug}`,target:"_blank",rel:"noopener noreferrer",children:`${window.location.origin}/m/${l.project_slug}`})]}),e.jsxs("div",{className:"flex gap-2 md:ml-4",children:[e.jsx("button",{type:"button",title:"Copy",onClick:()=>D(l),className:"group bg-white p-3 rounded-lg shadow hover:bg-primary-100",children:e.jsx(n,{icon:"akar-icons:copy",width:20,height:20,className:"text-foreground group-hover:text-white"})}),e.jsx("button",{type:"button",title:"Delete",onClick:()=>$(l),className:"group bg-white p-3 rounded-lg shadow hover:bg-primary-100",children:e.jsx(n,{icon:"gravity-ui:trash-bin",width:20,height:20,className:"text-foreground group-hover:text-white"})}),e.jsx("button",{type:"button",title:"Share",onClick:()=>_(l),className:"group bg-white p-3 rounded-lg shadow hover:bg-primary-100",children:e.jsx(n,{icon:"tabler:share",width:20,height:20,className:"text-foreground group-hover:text-white"})})]})]}),h&&e.jsx(O,{type:h.type,message:h.message,onClose:()=>a(null)}),e.jsx("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-2xl md:max-w-full p-10 relative",children:e.jsxs("div",{className:"mt-4",children:[e.jsxs("form",{onSubmit:k,className:" space-y-5 ",children:[e.jsx("input",{type:"hidden",value:r.category_id,name:"category_id"}),r.links.map((t,s)=>e.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center gap-3 border border-brfourth rounded-md p-6",children:[e.jsxs("div",{className:"flex-1 w-full",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title URL"}),e.jsx("input",{type:"text",placeholder:"Example",value:t.title,onChange:o=>g(s,"title",o.target.value),required:!0,className:"w-full px-3 py-2 border-brfourth rounded-md focus:outline-none"})]}),e.jsxs("div",{className:"flex-1 w-full",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"URL"}),e.jsx("input",{type:"url",placeholder:"Example",value:t.url,onChange:o=>g(s,"url",o.target.value),required:!0,className:"w-full px-3 py-2 border-brfourth rounded-md focus:outline-none"})]}),e.jsxs("div",{className:"flex items-center gap-2 pt-1 mt-5",children:[r.links.length>1&&e.jsx("button",{type:"button",onClick:()=>v(s),className:"text-white bg-primary-100 hover:bg-secondary p-2 rounded",children:e.jsx(n,{icon:"gravity-ui:trash-bin",width:18,height:18})}),e.jsx("button",{type:"button",onClick:w,className:"text-white bg-secondary hover:bg-primary-100 p-2 rounded",children:e.jsx(n,{icon:"mdi:plus",width:18,height:18})})]})]},s)),x.links&&e.jsx("p",{className:"text-sm text-red-500",children:x.links}),e.jsx(F,{type:"submit",disabled:p,className:"w-full bg-primary-100 hover:bg-secondary text-white py-2 rounded-md font-semibold",children:p?"Updating...":"Update"})]}),f&&e.jsx(T,{isOpen:f,onClose:()=>u(!1),onConfirm:E}),C&&e.jsx(B,{url:S,onClose:()=>y(!1)})]})})]})};export{V as default};
