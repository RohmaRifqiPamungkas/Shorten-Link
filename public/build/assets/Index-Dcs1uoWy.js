import{r as a,v as I,j as e,m as F,q as T,$ as q,Y as G}from"./app-BO4aS4VV.js";import{N as _,D as O,a as H}from"./Notification-CE1hsZqh.js";import{d as v}from"./index-BTZty7Ay.js";import{S as J,a as W,B as Y,P as K}from"./ButtonShort-BMHvg6Fk.js";import{P as E}from"./PrimaryButton-DFDVG6GL.js";import{B as Q}from"./Breadcrumb-D9twYQCJ.js";import{I as D}from"./iconify-4cTnymJz.js";import{b as V}from"./index-C158x22U.js";/* empty css            */function X({show:N,onClose:n,project:o}){const[t,c]=a.useState(null),[x,r]=a.useState(null),d=a.useRef(null),{data:p,setData:m,post:y,processing:u,errors:h,reset:g,clearErrors:f}=I({name:"",image:null});if(a.useEffect(()=>{N||(g(),f(),c(null),r(null),d.current&&(d.current.value=""))},[N]),!N)return null;const l=b=>{const C=b.target.files[0];if(C){if(C.size>1*1024*1024){c({type:"error",message:"The file is too large. Maximum size is 1 MB."}),m("image",null),r(null),b.target.value="";return}m("image",C);const w=new FileReader;w.onloadend=()=>{r(w.result)},w.readAsDataURL(C)}else r(null)},i=b=>{b.preventDefault(),y(`/projects/${o.id}/categories`,{forceFormData:!0,onSuccess:()=>{c({type:"success",message:"Created Succesfully"}),g(),f(),r(null),d.current&&(d.current.value="")},onError:()=>{c({type:"error",message:"An error occurred, please check your input."})}})},j=()=>{g(),f(),c(null),r(null),d.current&&(d.current.value=""),n()};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-5",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl w-full  max-w-sm md:max-w-2xl p-5 md:p-10 relative",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{className:"flex flex-row",children:[e.jsx("img",{src:"/images/Hyperlink.png",style:{width:"24px",height:"24px"},alt:"hyperlink"}),e.jsx("h2",{className:"text-sm md:text-xl ms-4 font-semibold text-primary-100 mb-4",children:"Categories Link"})]}),e.jsx("button",{onClick:j,className:"text-foreground font-black hover:text-primary-100 w-2 h-2 md:w-4 md:h-4",children:"✕"})]}),t&&e.jsx(_,{type:t.type,message:t.message,onClose:()=>c(null)}),e.jsx("div",{className:"mt-4",children:e.jsxs("form",{onSubmit:i,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm text-foreground",children:"Name Categories"}),e.jsx("input",{type:"text",className:"w-full border border-brfourth rounded-lg px-3 py-2 mt-1",placeholder:"Example",value:p.name,onChange:b=>m("name",b.target.value),required:!0}),h.name&&e.jsx("div",{className:"text-red-500 text-sm mt-1",children:h.name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm text-foreground",children:"Image Logo"}),e.jsx("input",{type:"file",accept:"image/*",className:"w-full border border-brfourth rounded-lg px-3 py-2 mt-1",onChange:l,required:!0}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Recommended format: JPG, PNG, or WEBP. Maximum size: 1 MB."}),h.image&&e.jsx("div",{className:"text-red-500 text-sm mt-1",children:h.image}),x&&e.jsx("img",{src:x,alt:"Preview",className:"mt-2 max-h-32 object-contain rounded"})]}),e.jsx(E,{type:"submit",disabled:u,children:u?"Creating...":"Create Categories"})]})})]})})}function Z({show:N,onClose:n,project:o,category:t}){const[c,x]=a.useState(null),[r,d]=a.useState(""),{data:p,setData:m,processing:y,errors:u,reset:h}=I({name:(t==null?void 0:t.name)||"",image:null});if(a.useEffect(()=>{t&&(m({name:t.name||"",image:null}),d(t.image_url?`/uploads/${t.image_url}`:""))},[t==null?void 0:t.id]),!N)return null;const g=l=>{const i=l.target.files[0];if(i){if(i.size>1*1024*1024){x({type:"error",message:"The file is too large. Maximum size is 1 MB."}),m("image",null),d(t.image_url?`/storage/${t.image_url}`:""),l.target.value="";return}m("image",i),d(URL.createObjectURL(i))}},f=l=>{var j;l.preventDefault();const i=new FormData;i.append("name",((j=p.name)==null?void 0:j.trim())||""),p.image&&i.append("image",p.image),i.append("_method","PATCH"),F.post(route("projects.categories.update",[o.id,t.id]),i,{forceFormData:!0,preserveScroll:!0,onSuccess:()=>{x({type:"success",message:"Updated Successfully."}),h(),d(""),n()},onError:()=>{x({type:"error",message:"An error occurred, please check your input"})}})};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-5",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-2xl p-5 md:p-10 relative",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{className:"flex flex-row",children:[e.jsx("img",{src:"/images/Hyperlink.png",style:{width:"24px",height:"24px"},alt:"hyperlink"}),e.jsx("h2",{className:"text-sm md:text-xl ms-4 font-semibold text-primary-100 mb-4",children:"Edit Categories Link"})]}),e.jsx("button",{onClick:n,className:"text-foreground font-black hover:text-primary-100 w-2 h-2 md:w-4 md:h-4",children:"✕"})]}),c&&e.jsx(_,{type:c.type,message:c.message,onClose:()=>x(null)}),e.jsxs("form",{onSubmit:f,className:"space-y-6 mt-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm text-foreground",children:"Name Categories"}),e.jsx("input",{type:"text",className:"w-full border border-brfourth rounded-lg px-3 py-2 mt-1",placeholder:"Example",value:p.name,onChange:l=>m("name",l.target.value),required:!0}),u.name&&e.jsx("div",{className:"text-red-500 text-sm mt-1",children:u.name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm text-foreground",children:"Image Logo"}),e.jsx("input",{type:"file",accept:"image/*",className:"w-full border border-brfourth rounded-lg px-3 py-2 mt-1",onChange:g,required:!0}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Recommended format: JPG, PNG, or WEBP. Max size: 1 MB."}),u.image&&e.jsx("div",{className:"text-red-500 text-sm mt-1",children:u.image}),r&&e.jsx("img",{src:r,alt:"Preview",className:"mt-2 max-h-32 object-contain rounded"})]}),e.jsx(E,{type:"submit",disabled:y,children:y?"Updating...":"Update Categories"})]})]})})}function ce({auth:N,project:n={}}){const{categories:o={data:[],links:[]},success:t}=T().props,[c,x]=a.useState(""),[r,d]=a.useState(!1),[p,m]=a.useState([]),[y,u]=a.useState(!1),[h,g]=a.useState(!1),[f,l]=a.useState(!1),[i,j]=a.useState(null),[b,C]=a.useState(null),[w,k]=a.useState(null),[P,$]=a.useState(Number(new URLSearchParams(window.location.search).get("perPage"))||10);a.useEffect(()=>{t&&(k({type:"success",message:t}),v.Inertia.replace(window.location.pathname+window.location.search))},[t]);const B=s=>{m(S=>S.includes(s)?S.filter(A=>A!==s):[...S,s])},M=s=>{j(s),l(!0)},L=()=>{i?v.Inertia.delete(`/projects/${n.id}/categories/${i.id}`,{onSuccess:()=>{k({type:"success",message:"Deleted successfully."}),l(!1),j(null)},onError:()=>{k({type:"error",message:"Failed to delete category. Please try again."}),l(!1),j(null)},preserveScroll:!0}):l(!1)},R=s=>{v.Inertia.get(window.location.pathname,{page:s,perPage:P,search:c},{preserveState:!0,replace:!0})},U=s=>{$(s),v.Inertia.get(window.location.pathname,{page:1,perPage:s,search:c},{preserveState:!0,replace:!0})},z=s=>{x(s),v.Inertia.get(window.location.pathname,{page:1,perPage:P,search:s},{preserveState:!0,replace:!0})};return e.jsxs(O,{user:N.user,children:[e.jsx(q,{title:"Add categories"}),e.jsx(Q,{}),e.jsxs("div",{className:"py-5",children:[e.jsx("h1",{className:"text-xl md:text-2xl font-semibold text-primary-100",children:"Categories"}),e.jsxs("div",{className:"flex justify-between items-center flex-wrap gap-5 my-3",children:[e.jsxs("span",{className:"text-foreground text-sm  md:text-lg font-medium",children:["Categories for :"," ",e.jsx("a",{className:"underline",href:`/m/${n.project_slug}`,target:"_blank",rel:"noopener noreferrer",children:`${window.location.origin}/m/${n.project_slug}`})]}),e.jsxs("div",{className:"flex items-center gap-3 transition-all duration-300 ease-in-out flex-wrap",children:[e.jsx("div",{className:"transition-all duration-300",children:e.jsx(J,{onClick:()=>u(!0),label:"Add Categories",icon:e.jsx(V,{size:18})})}),e.jsx("div",{className:"transition-all duration-300",children:e.jsx(W,{onSearch:z})}),e.jsx("div",{className:"transition-all duration-300",children:e.jsx(Y,{isActive:r,toggleBulkMode:()=>{d(!r),m([])},onDelete:()=>alert("Bulk delete belum diimplementasikan.")})})]})]}),w&&e.jsx(_,{type:w.type,message:w.message,onClose:()=>k(null)}),e.jsx("div",{className:"overflow-x-auto bg-white shadow rounded-2xl",children:e.jsxs("table",{className:"min-w-full text-left border-collapse text-sm  md:text-[16px]",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-muted",children:[r&&e.jsx("th",{className:"px-4 py-6",children:e.jsx("input",{type:"checkbox",disabled:!0})}),e.jsx("th",{className:"px-4 py-6 font-semibold",children:"Categories"}),e.jsx("th",{className:"px-4 py-6 font-semibold",children:"Date Created"}),e.jsx("th",{className:"px-4 py-6 font-semibold",children:"Links"}),e.jsx("th",{className:"px-4 py-6 font-semibold",children:"Action"})]})}),e.jsx("tbody",{children:o.data.length>0?o.data.map(s=>e.jsxs("tr",{className:"border-b border-muted hover:bg-gray-50 cursor-pointer",onClick:()=>window.location.href=`/projects/${n.id}/categories/${s.id}/links`,children:[r&&e.jsx("td",{className:"px-4 py-4",children:e.jsx("input",{type:"checkbox",checked:p.includes(s.id),onChange:()=>B(s.id)})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap hover:underline",children:e.jsx("a",{href:`/projects/${n.id}/categories/${s.id}/links`,children:s.name})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:s.created_at.slice(0,10)}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap hover:underline",children:s.links_count}),e.jsxs("td",{className:"px-4 py-4 space-x-4 text-lg text-gray-700 flex",onClick:S=>S.stopPropagation(),children:[e.jsx(G,{href:`/projects/${n.id}/categories/${s.id}/links`,title:"link",className:"hover:text-primary-100",children:e.jsx(D,{icon:"material-symbols:link-rounded",width:20,height:20})}),e.jsx("button",{onClick:()=>{C(s),g(!0)},title:"Edit",className:"hover:text-primary-100",children:e.jsx(D,{icon:"iconamoon:edit-light",width:20,height:20})}),e.jsx("button",{onClick:()=>M(s),title:"Delete",className:"hover:text-primary-100",children:e.jsx(D,{icon:"gravity-ui:trash-bin",width:20,height:20})})]})]},s.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:r?5:4,className:"px-4 py-6 text-center text-gray-500",children:"No categories available yet."})})})]})}),e.jsx(K,{pagination:{current_page:o.current_page,last_page:o.last_page,from:o.from,to:o.to,total:o.total,prev_page_url:o.prev_page_url,next_page_url:o.next_page_url},perPage:P,onPageChange:R,onPerPageChange:U}),f&&e.jsx(H,{isOpen:f,onClose:()=>l(!1),onConfirm:L}),e.jsx(X,{show:y,onClose:()=>u(!1),project:n,onSuccess:()=>v.Inertia.reload()}),e.jsx(Z,{show:h,onClose:()=>g(!1),project:n,category:b,onSuccess:()=>v.Inertia.reload()})]})]})}export{ce as default};
