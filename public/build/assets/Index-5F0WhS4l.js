import{r as a,v as F,j as e,q as R,$ as q,Y as z}from"./app-BO4aS4VV.js";import{N as k,D as Y,a as H}from"./Notification-CE1hsZqh.js";import{d as h}from"./index-BTZty7Ay.js";import{S as G,a as J,B as K,P as Q}from"./ButtonShort-BMHvg6Fk.js";import{P as V}from"./PrimaryButton-DFDVG6GL.js";import{S as W}from"./ShareModal-BixkgqME.js";import{I as y}from"./iconify-4cTnymJz.js";import{b as X}from"./index-C158x22U.js";/* empty css            */function Z({show:b,onClose:s}){const[d,o]=a.useState(null),{data:u,setData:n,post:g,processing:p,errors:l,reset:j,clearErrors:x}=F({project_name:"",project_slug:""});if(!b)return null;const f=()=>{j(),x(),o(null),s()},m=c=>{c.preventDefault(),o(null),g("/projects",{onSuccess:()=>{o({type:"success",message:"Created Successfully."}),j(),x()},onError:()=>{o({type:"error",message:"An error occurred, please check your input."})}})};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-5",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-sm md:max-w-2xl p-5 md:p-10 relative",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{className:"flex flex-row",children:[e.jsx("img",{src:"/images/Hyperlink.png",style:{width:"24px",height:"24px"},alt:"hyperlink"}),e.jsx("h2",{className:"text-sm md:text-xl ms-4 font-semibold text-primary-100 mb-4",children:"Management Link"})]}),e.jsx("button",{onClick:f,className:"text-foreground font-black hover:text-primary-100 w-2 h-2 md:w-4 md:h-4",children:"âœ•"})]}),d&&e.jsx(k,{type:d.type,message:d.message,onClose:()=>o(null)}),e.jsx("div",{className:"mt-4",children:e.jsxs("form",{onSubmit:m,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-foreground",children:"Name Project"}),e.jsx("input",{type:"text",className:"w-full border border-brfourth rounded-lg px-3 py-2 mt-1",placeholder:"example",name:"project_name",value:u.project_name,onChange:c=>n("project_name",c.target.value),required:!0}),l.project_name&&e.jsx("div",{className:"text-red-500 text-sm mt-1",children:l.project_name})]}),e.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:gap-0",children:[e.jsxs("div",{className:"w-full md:basis-3/4 md:me-4",children:[e.jsx("label",{className:"text-sm text-foreground",children:"URL"}),e.jsx("input",{type:"text",className:"w-full border border-brfourth rounded-lg px-2.5 py-2 mt-1 bg-white text-foreground",value:`${window.location.host}/m/`,readOnly:!0})]}),e.jsxs("div",{className:"w-full md:basis-3/4",children:[e.jsx("label",{className:"text-sm text-foreground",children:"Alias"}),e.jsx("input",{type:"text",className:"w-full border border-brfourth rounded-lg px-3 py-2 mt-1 bg-white text-foreground",placeholder:"custom-alias",id:"project_slug",name:"project_slug",value:u.project_slug,onChange:c=>n("project_slug",c.target.value)}),l.project_slug&&e.jsx("div",{className:"text-red-500 text-sm mt-1",children:l.project_slug})]})]}),e.jsx(V,{type:"submit",disabled:p,children:p?"Add Project...":"Add Project"})]})})]})})}function ie({auth:b}){const{projects:s={data:[],links:[]},success:d}=R().props,[o,u]=a.useState(""),[n,g]=a.useState(!1),[p,l]=a.useState([]),[j,x]=a.useState(!1),[f,m]=a.useState(!1),[c,w]=a.useState(null),[_,v]=a.useState(!1),[C,P]=a.useState(""),[N,i]=a.useState(null),[S,D]=a.useState(Number(new URLSearchParams(window.location.search).get("perPage"))||10);a.useEffect(()=>{d&&(i({type:"success",message:d}),h.Inertia.replace(window.location.pathname+window.location.search))},[d]);const $=t=>{l(r=>r.includes(t)?r.filter(T=>T!==t):[...r,t])},E=t=>{const r=`${window.location.host}/m/${t.project_slug}`;navigator.clipboard.writeText(r).then(()=>{i({type:"success",message:"Link copied to clipboard!"})}).catch(()=>{i({type:"error",message:"Failed to copy the link."})})},M=t=>{const r=`${window.location.host}/m/${t.project_slug}`;P(r),v(!0)},I=t=>{w(t),m(!0)},L=()=>{c?h.Inertia.delete(`/projects/${c.id}`,{onSuccess:()=>{m(!1),w(null)},onError:()=>{i({type:"error",message:"Failed to delete project. Please try again."}),m(!1),w(null)},preserveScroll:!0}):m(!1)},A=()=>{if(p.length===0){i({type:"error",message:"No projects selected."});return}window.confirm("Are you sure you want to delete selected projects?")&&h.Inertia.post("/projects/bulk-delete",{ids:p,_method:"DELETE"},{onSuccess:()=>{i({type:"success",message:"Selected Deleted Successfully."}),l([]),g(!1)},onError:()=>{i({type:"error",message:"Failed to delete selected projects."})},preserveScroll:!0})},U=t=>{h.Inertia.get("/projects",{page:t,perPage:S,search:o},{preserveState:!0,replace:!0})},B=t=>{D(t),h.Inertia.get("/projects",{page:1,perPage:t,search:o},{preserveState:!0,replace:!0})},O=t=>{u(t),h.Inertia.get("/projects",{page:1,perPage:S,search:t},{preserveState:!0,replace:!0})};return e.jsxs(Y,{user:b.user,children:[e.jsx(q,{title:"Management Link"}),e.jsxs("div",{className:"py-5",children:[e.jsx("h1",{className:"text-xl md:text-2xl font-semibold text-primary-100",children:"Management Link"}),e.jsxs("div",{className:"flex justify-between items-center flex-wrap gap-5 my-3",children:[e.jsx("p",{className:"text-gray-700 text-lg font-medium",children:"List Management Link"}),e.jsxs("div",{className:"flex items-center gap-3 transition-all duration-300 ease-in-out flex-wrap",children:[e.jsx("div",{className:"transition-all duration-300",children:e.jsx(G,{onClick:()=>x(!0),label:"Add Project",icon:e.jsx(X,{size:18})})}),e.jsx("div",{className:"transition-all duration-300",children:e.jsx(J,{onSearch:O})}),e.jsx("div",{className:"transition-all duration-300",children:e.jsx(K,{isActive:n,toggleBulkMode:()=>{g(!n),l([])},onDelete:A})})]})]}),N&&e.jsx(k,{type:N.type,message:N.message,onClose:()=>i(null)}),e.jsx("div",{className:"overflow-x-auto bg-white shadow rounded-2xl",children:e.jsxs("table",{className:"min-w-full text-left border-collapse text-sm  md:text-[16px]",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-muted",children:[n&&e.jsx("th",{className:"px-4 py-6",children:e.jsx("input",{type:"checkbox",checked:p.length===s.data.length&&s.data.length>0,onChange:t=>{t.target.checked?l(s.data.map(r=>r.id)):l([])}})}),e.jsx("th",{className:"px-4 py-6 font-semibold",children:"Project Name"}),e.jsx("th",{className:"px-4 py-6 font-semibold",children:"URL"}),e.jsx("th",{className:"px-4 py-6 font-semibold",children:"Date Created"}),e.jsx("th",{className:"px-4 py-6 font-semibold",children:"Action"})]})}),e.jsx("tbody",{children:s.data.length>0?s.data.map(t=>e.jsxs("tr",{className:"border-b border-muted hover:bg-gray-50",children:[n&&e.jsx("td",{className:"px-4 py-4",children:e.jsx("input",{type:"checkbox",checked:p.includes(t.id),onChange:()=>$(t.id)})}),e.jsxs("td",{className:"px-4 py-4 whitespace-nowrap hover:underline flex items-center gap-2",children:[e.jsx("span",{className:"inline-flex items-center justify-center w-8 h-8 rounded-full bg-primary-100 text-white font-bold text-lg",style:{flexShrink:0},children:t.project_name.charAt(0).toUpperCase()}),e.jsx("a",{href:`/projects/${t.id}/categories`,className:"hover:underline text-foreground",children:t.project_name})]}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("a",{href:`${window.location.origin}/m/${t.project_slug}`,target:"_blank",rel:"noopener noreferrer",className:"text-foreground hover:underline",children:`${window.location.origin}/m/${t.project_slug}`})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:t.created_at.slice(0,10)}),e.jsxs("td",{className:"px-4 py-4 space-x-4 text-lg text-gray-700 flex",onClick:r=>r.stopPropagation(),children:[e.jsx("button",{title:"Copy",onClick:()=>E(t),className:"hover:text-primary-100",children:e.jsx(y,{icon:"akar-icons:copy",width:20,height:20})}),e.jsx(z,{href:`/projects/${t.id}/edit`,title:"Edit",className:"hover:text-primary-100",children:e.jsx(y,{icon:"iconamoon:edit-light",width:20,height:20})}),e.jsx("button",{onClick:()=>I(t),title:"Delete",className:"hover:text-primary-100",children:e.jsx(y,{icon:"gravity-ui:trash-bin",width:20,height:20})}),e.jsx("button",{title:"Share",onClick:()=>M(t),className:"hover:text-primary-100",children:e.jsx(y,{icon:"tabler:share",width:20,height:20})})]})]},t.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:n?4:3,className:"px-4 py-6 text-center text-gray-500",children:"No projects available yet."})})})]})}),e.jsx(Q,{pagination:{current_page:s.current_page,last_page:s.last_page,from:s.from,to:s.to,total:s.total,prev_page_url:s.prev_page_url,next_page_url:s.next_page_url},perPage:S,onPageChange:U,onPerPageChange:B}),f&&e.jsx(H,{isOpen:f,onClose:()=>m(!1),onConfirm:L}),_&&e.jsx(W,{url:C,onClose:()=>v(!1)}),e.jsx(Z,{show:j,onClose:()=>x(!1),onSuccess:()=>h.Inertia.reload()})]})]})}export{ie as default};
