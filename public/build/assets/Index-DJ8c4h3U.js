import{b as B,r as s,j as e,H as E,L as M}from"./app-BFg2P5Wj.js";import{D as T}from"./DashboardLayout-4fJ9hrIz.js";import{d as r}from"./index-B-NIXFdN.js";import{S as R,B as A,P as U}from"./BulkAction-D7P3iHnE.js";import{S as O}from"./ButtonShort-DIFxLCbJ.js";import{B as z}from"./Breadcrumb-McQJJT4u.js";import{D as F}from"./DeleteModal-BAt4GIh7.js";import{N as H}from"./Notification-BwZVfdfk.js";import{I as w}from"./iconify-DMzbdefQ.js";import{b as q}from"./index-DMJx3FTh.js";/* empty css            */function se({auth:b,project:n={},category:d={},links:a={data:[],meta:{}},categories:N=[]}){const{success:m,error:G}=B().props,[u,y]=s.useState(""),[o,S]=s.useState(!1),[_,g]=s.useState([]),[v,i]=s.useState(!1),[f,p]=s.useState(null),[j,x]=s.useState(null),[h,C]=s.useState(Number(new URLSearchParams(window.location.search).get("perPage"))||10);s.useEffect(()=>{m&&(x({type:"success",message:m}),r.Inertia.replace(window.location.pathname+window.location.search))},[m]);const P=t=>{g(l=>l.includes(t)?l.filter(c=>c!==t):[...l,t])},L=t=>{p(t),i(!0)},D=()=>{f?r.Inertia.delete(`/projects/${n.id}/links/${f.id}`,{onSuccess:()=>{i(!1),p(null),r.Inertia.reload({only:["links","success"]})},onError:()=>{x({type:"error",message:"Failed to delete link. Please try again."}),i(!1),p(null)},preserveScroll:!0}):i(!1)},I=t=>{r.Inertia.get(window.location.pathname,{page:t,perPage:h,search:u},{preserveState:!0,replace:!0})},$=t=>{C(t),r.Inertia.get(window.location.pathname,{page:1,perPage:t,search:u},{preserveState:!0,replace:!0})},k=t=>{y(t),r.Inertia.get(window.location.pathname,{page:1,perPage:h,search:t},{preserveState:!0,replace:!0})};return e.jsxs(T,{user:b.user,children:[e.jsx(E,{title:"Link in Categories "}),e.jsx(z,{}),e.jsxs("div",{className:"py-5",children:[e.jsx("h1",{className:"text-xl md:text-2xl font-semibold text-primary-100",children:"Link in Categories"}),e.jsxs("div",{className:"flex justify-between items-center flex-wrap gap-5 my-3",children:[e.jsxs("span",{className:"text-foreground text-sm md:text-lg font-medium",children:["List link in :"," ",e.jsx("a",{className:"underline",href:`/m/${n.project_slug}`,target:"_blank",rel:"noopener noreferrer",children:`${window.location.origin}/m/${n.project_slug}`})]}),e.jsxs("div",{className:"flex items-center gap-3 transition-all duration-300 ease-in-out flex-wrap",children:[e.jsx("div",{className:"transition-all duration-300",children:e.jsx(O,{onClick:()=>{var t;return r.Inertia.get(`/projects/${n.id}/links/create?category_id=${(d==null?void 0:d.id)??((t=N[0])==null?void 0:t.id)??""}`)},label:"Add URL",icon:e.jsx(q,{size:18})})}),e.jsx("div",{className:"transition-all duration-300",children:e.jsx(R,{onSearch:k})}),e.jsx("div",{className:"transition-all duration-300",children:e.jsx(A,{isActive:o,toggleBulkMode:()=>{S(!o),g([])},onDelete:()=>alert("Bulk delete belum diimplementasikan.")})})]})]}),j&&e.jsx(H,{...j,onClose:()=>x(null)}),e.jsx("div",{className:"overflow-x-auto bg-white shadow rounded-2xl",children:e.jsxs("table",{className:"min-w-full text-left border-collapse text-sm  md:text-[16px]",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-muted",children:[o&&e.jsx("th",{className:"px-4 py-6",children:e.jsx("input",{type:"checkbox",disabled:!0})}),e.jsx("th",{className:"px-4 py-6 font-semibold",children:"URL & Link Name"}),e.jsx("th",{className:"px-4 py-6 font-semibold",children:"Date Created"}),e.jsx("th",{className:"px-4 py-6 font-semibold",children:"Categories"}),e.jsx("th",{className:"px-4 py-6 font-semibold",children:"Action"})]})}),e.jsx("tbody",{children:a.data.length>0?a.data.map(t=>{var l;return e.jsxs("tr",{className:"border-b border-muted hover:bg-gray-50",children:[o&&e.jsx("td",{className:"px-4 py-4",children:e.jsx("input",{type:"checkbox",checked:_.includes(t.id),onChange:()=>P(t.id)})}),e.jsxs("td",{className:"px-4 py-4 whitespace-nowrap flex items-center gap-2  w-full max-w-full md:max-w-[560px] overflow-hidden",children:[e.jsx("img",{src:`https://www.google.com/s2/favicons?sz=64&domain=${new URL(t.original_url).hostname}`,alt:"favicon",className:"w-8 h-8 rounded-full bg-gray-100 object-contain",style:{flexShrink:0},onError:c=>{c.currentTarget.onerror=null,c.currentTarget.src="https://cdn-icons-png.flaticon.com/512/565/565547.png"}}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("a",{href:t.original_url,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-foreground hover:underline block overflow-hidden text-ellipsis whitespace-nowrap",children:t.original_url.length>50?`${t.original_url.slice(0,60)}...`:t.original_url}),e.jsx("div",{className:"text-foreground",children:t.title})]})]}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:t.created_at.slice(0,10)}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:(l=t.category)!=null&&l.name?e.jsx("span",{className:"inline-block bg-secondary text-white text-sm font-medium px-6 py-2 rounded-lg",children:t.category.name}):"-"}),e.jsxs("td",{className:"px-4 py-4 space-x-4 flex",children:[e.jsx(M,{href:`/projects/${n.id}/links/${t.id}/edit`,title:"Edit",className:"hover:text-primary-100 ",children:e.jsx(w,{icon:"iconamoon:edit-light",width:20,height:20})}),e.jsx("button",{onClick:()=>L(t),className:"hover:text-primary-100",title:"Delete",children:e.jsx(w,{icon:"gravity-ui:trash-bin",width:20,height:20})})]})]},t.id)}):e.jsx("tr",{children:e.jsx("td",{colSpan:o?5:4,className:"px-4 py-6 text-center text-gray-500",children:"Belum ada link yang tersedia."})})})]})}),e.jsx(U,{pagination:{current_page:a.current_page,last_page:a.last_page,from:a.from,to:a.to,total:a.total,prev_page_url:a.prev_page_url,next_page_url:a.next_page_url},perPage:h,onPageChange:I,onPerPageChange:$}),e.jsx(F,{isOpen:v,onClose:()=>i(!1),onConfirm:D})]})]})}export{se as default};
